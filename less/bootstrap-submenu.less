@import "../bootstrap/less/variables.less";

//
// Sub-Menus
// --------------------------------------------------

.dropdown-submenu > a:after {
	float: right;
	content: "";
	margin-right: -@caret-width-base * 2 - 2;
}

.make-nested-list(@offset, @i, @n) when (@i < @n) {
	> .dropdown-menu > li {
		&.dropdown-header,
		> a {
			padding-left: @offset + (10 * @i);
		}

		.make-nested-list(@offset, @i + 1, @n);
	}
}

@media (min-width: @grid-float-breakpoint) {
	.dropdown-submenu {
		position: relative;

		> a:after {
			margin-top: @line-height-computed / 2 - @caret-width-base;
			border-top: @caret-width-base solid transparent;

			// dashed: fix caret size for Mozilla Firefox
			border-left: @caret-width-base dashed;

			border-bottom: @caret-width-base solid transparent;
		}

		> .dropdown-menu {
			top: 0;
			left: 100%;
			margin-top: -6px;
			border-top-left-radius: 0;
		}
	}
}

@media (max-width: @grid-float-breakpoint-max) {
	.dropdown-submenu {
		> a:after {
			margin-top: @line-height-computed / 2 - @caret-width-base / 2;

			// dashed: fix caret size for Mozilla Firefox
			border-top: @caret-width-base dashed;

			border-left: @caret-width-base solid transparent;
			border-right: @caret-width-base solid transparent;
			border-bottom-width: 0;
		}

		.dropdown-menu {
			position: static;
			margin-top: 0;
			border: 0;
			box-shadow: none;
		}
	}

	.dropdown > .dropdown-menu > .dropdown-submenu {
		.make-nested-list(30px, 0, 4);

		.navbar-nav > & {
			.make-nested-list(35px, 0, 4);
		}
	}
}
